<!DOCTYPE html>

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script type="text/javascript" src="lib/jquery.min.js"></script>
    <script type="text/javascript" src="lib/osql.js"></script>

    <script>
        // osql.requireLogin();

        $().ready(function () {
            execSelect();
        });

        async function execSelect() {
            var html = '';
            var member_name = osql.getParam('member_name');
            var sql = `select * from party inner join member where party.party_name = member.party_name and member_name="${member_name}";`;
            var objects = await osql.connect(sql);
            console.log(objects);
            if (objects.length <= 0) {
                document.getElementById('result').innerHTML = 'not found';
                return;
            }
            var object = objects[0];

            html = html + '<ul>';
            html = html + object.member_name;

            html = html + '<li>' + '所属部隊:' + object.alphabet_rank + '級' + object.number_rank + '位' + object.party_name + '隊' + '</li>';
            html = html + '<li>' + 'ポジション:' + object.position + '</li>';
            html = html + '<li>' + '年齢:' + object.age + '</li>';

            html = html + '</ul>'
            document.getElementById('result').innerHTML = html;
        }


    </script>

</head>


<body>
    <h1>オペレーター詳細ページ</h1>
    <p id="result"></p>

    <br>
    <br>
    <button onclick="button1Pressed()">データを修正する</button>
    <br>

</body>

</html>